(this["webpackJsonpbattlepass-tracker"]=this["webpackJsonpbattlepass-tracker"]||[]).push([[0],{20:function(e,t,n){},36:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),r=n(8),s=n.n(r),i=(n(20),n(9)),l=n(6),d=n(3),o=n(10),j=n(4),b=n(5),u=n(15),h=n(0),m=function(e){var t=e.data,n=e.handleChange,c=e.editButton,r=e.deleteButton,s=e.moveButton,i=e.position,l=Object(a.useState)(!1),m=Object(d.a)(l,2),O=m[0],x=m[1],v=Object(a.useState)(t.level),f=Object(d.a)(v,2),g=f[0],p=f[1],N=t.time||"00:00",k={start:new Date("".concat(t.start,"T").concat(N)),current:new Date,end:new Date("".concat(t.end,"T").concat(N))},C=Math.floor((k.end-k.current)/864e5),y=Math.floor((k.end-k.current)/36e5),S=Math.floor(k.current-k.start),T=Math.floor(k.end-k.start),I=t.goal,B=0;k.current<k.start&&(B=k.start-k.current);var w=function(e,t,n){return e<=t?t:e>=n?n:e},R=w(g/I*100,0,100),E=w(S/T*100,0,100),F=function(e){var a=t.id,c=e.currentTarget.getAttribute("data-operation"),r=parseInt(g),s=parseInt(t.increment)||1;"plus"===c?r+=s:r-=s,p(r),n(a,r)},M=function(e){var n=t.id,a=e.currentTarget.getAttribute("data-direction");s(n,a)},P=function(){if(k.start>k.end)return Object(h.jsx)("div",{className:"progress-notice",children:Object(h.jsx)("p",{children:"ERROR: The start date is higher than end date."})});if(Number.isNaN(k.start/1e3)||Number.isNaN(k.end/1e3))return Object(h.jsx)("div",{className:"progress-notice",children:Object(h.jsx)("p",{children:"ERROR: The entered date is invalid."})});if(I<=0)return Object(h.jsx)("div",{className:"progress-notice",children:Object(h.jsx)("p",{children:"ERROR: The defined goal is invalid."})});if(0===B&&C>=0){var e=y>=24?Object(h.jsxs)("span",{className:"time-digits",children:[C," day(s)"]}):Object(h.jsxs)("span",{className:"time-digits",children:[y," hour(s)"]});return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("div",{className:"progress-days",style:{left:E+"%"},children:[Object(h.jsx)("span",{className:"time-icon",children:Object(h.jsx)(j.a,{icon:u.a})}),e,Object(h.jsx)("div",{className:"measure"})]}),Object(h.jsxs)("div",{className:"progress-buttons",children:[Object(h.jsx)("button",{"data-operation":"minus",onClick:F,title:"Decrement",children:Object(h.jsx)(j.a,{icon:b.d})}),Object(h.jsx)("button",{"data-operation":"plus",onClick:F,title:"Increment",children:Object(h.jsx)(j.a,{icon:b.e})})]})]})}if(B>=1){var t=Math.floor(B/864e5),n=Math.floor(B/36e5),a=n<=24?Object(h.jsxs)("p",{children:["This event start in ",n," hours(s)"]}):Object(h.jsxs)("p",{children:["This event start in ",t," day(s)"]});return Object(h.jsx)("div",{className:"progress-notice",children:a})}if(C<0){var c=y>=-24?Object(h.jsxs)("p",{children:["This event ended ",-y-1," hours(s) ago"]}):Object(h.jsxs)("p",{children:["This event ended ",-C-1," days(s) ago"]});return Object(h.jsx)("div",{className:"progress-notice",children:c})}return Object(h.jsx)("div",{className:"progress-notice",children:Object(h.jsx)("p",{children:"An unknown error has occured"})})},D=function(){var e=Object(h.jsx)("button",{"data-direction":"up",onClick:M,title:"Move tracker up",children:Object(h.jsx)(j.a,{icon:b.b})}),t=Object(h.jsx)("button",{"data-direction":"down",onClick:M,title:"Move tracker down",children:Object(h.jsx)(j.a,{icon:b.a})});return"alone"===i?null:"first"===i?t:"last"===i?e:Object(h.jsxs)(h.Fragment,{children:[e,t]})};return!0===O?null:Object(h.jsx)(o.a,{flipId:t.id,children:Object(h.jsxs)("div",{className:"tracker",children:[Object(h.jsxs)("div",{className:"level-form",children:[Object(h.jsxs)("h2",{children:[t.name,": "]}),Object(h.jsx)("input",{type:"number",name:"level",value:g,onChange:function(e){var a=t.id,c=e.target.value;p(c),n(a,c)},style:{width:.6*I.toString().length+"em"}}),Object(h.jsxs)("h2",{children:["/",t.goal]}),Object(h.jsxs)("div",{className:"buttons-container right",children:[Object(h.jsx)("button",{onClick:function(){var e=t.id;r(e),x(!0)},title:"Delete tracker",children:Object(h.jsx)(j.a,{icon:b.f})}),Object(h.jsx)("button",{onClick:function(){var e=t.id;c(e)},title:"Edit tracker",children:Object(h.jsx)(j.a,{icon:b.c})})]}),Object(h.jsx)("div",{className:"buttons-container left",children:Object(h.jsx)(D,{})})]}),Object(h.jsxs)("div",{className:"progress-container",children:[Object(h.jsx)("span",{className:"dates left",children:k.start.toLocaleString("default",{day:"numeric",month:"long"})}),Object(h.jsxs)("div",{className:"progress bg",children:[Object(h.jsx)(P,{}),Object(h.jsx)("div",{className:"progress bar".concat(R<E?" late":100===R?" finished":""),style:{width:R+"%"}})]}),Object(h.jsx)("span",{className:"dates",children:k.end.toLocaleString("default",{day:"numeric",month:"long"})})]})]})})},O=function(e){var t=e.mode,n=e.form,a=e.handleChange,c=e.open,r=e.onClose,i=e.onSave;e.children;return c?s.a.createPortal(Object(h.jsx)(h.Fragment,{children:Object(h.jsx)("div",{className:"modal-overlay",children:Object(h.jsxs)("div",{className:"modal",children:[Object(h.jsx)("h2",{children:!1===t?"New Battle Pass tracking":"Edit Battle Pass Tracking"}),Object(h.jsxs)("div",{className:"form-table",children:[Object(h.jsx)("label",{htmlFor:"name",children:"Tracker name"}),Object(h.jsx)("input",{type:"text",name:"name",value:n.name,onChange:a}),Object(h.jsx)("label",{htmlFor:"start",children:"Start date"}),Object(h.jsx)("input",{type:"date",name:"start",value:n.start,onChange:a}),Object(h.jsx)("label",{htmlFor:"end",children:"End date"}),Object(h.jsx)("input",{type:"date",name:"end",value:n.end,onChange:a}),Object(h.jsx)("label",{htmlFor:"time",children:"Time"}),Object(h.jsx)("input",{type:"time",name:"time",value:n.time,onChange:a}),Object(h.jsx)("label",{htmlFor:"goal",children:"Level goal"}),Object(h.jsx)("input",{type:"number",name:"goal",value:n.goal,onChange:a}),Object(h.jsx)("label",{htmlFor:"increment",children:"Increment amount"}),Object(h.jsx)("input",{type:"number",name:"increment",value:n.increment,onChange:a})]}),Object(h.jsxs)("div",{className:"modal-buttons-container",children:[Object(h.jsx)("button",{onClick:i,children:"Save"}),Object(h.jsx)("button",{onClick:r,children:"Cancel"})]})]})})}),document.getElementById("portal")):null},x=function(){var e=Object(a.useState)(1),t=Object(d.a)(e,2),c=t[0],r=t[1],s=Object(a.useState)([]),j=Object(d.a)(s,2),b=j[0],u=j[1],x=Object(a.useRef)(!0);if(x.current){var v=JSON.parse(localStorage.getItem("BattlePassTracker"));null!==v&&(r(v.index),u(v.data)),x.current=!1}var f=Object(a.useState)({name:"",start:"",end:"",time:"",goal:0,level:"0",increment:"1"}),g=Object(d.a)(f,2),p=g[0],N=g[1],k=Object(a.useState)(!1),C=Object(d.a)(k,2),y=C[0],S=C[1],T=Object(a.useState)(!1),I=Object(d.a)(T,2),B=I[0],w=I[1],R=Object(a.useState)([0,0]),E=Object(d.a)(R,2),F=E[0],M=E[1],P=function(e){var t=b.findIndex((function(t){return t.id===e})),n=b[t];S(!0),N({id:n.id,name:n.name,start:n.start,end:n.end,time:n.time,goal:n.goal,level:n.level,increment:n.increment}),w(!0)},D=function(e,t){var n=b,a=n.findIndex((function(t){return t.id===e}));n[a].level=t,u(n),M([a,n])},A=function(e){var t=b,n=t.findIndex((function(t){return t.id===e}));t.splice(n,1),u(t),M([n,"deletion"])},J=function(e,t){var a=n(27),c=b,r=c.findIndex((function(t){return t.id===e})),s=r;"up"===t?s--:s++;var i=a(c,r,s);u(i),M([r,"moved"])},L=b.map((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n="";return 1===b.length?n="alone":0===t?n="first":t===b.length-1&&(n="last"),Object(h.jsx)(m,{data:e,handleChange:D,editButton:P,deleteButton:A,moveButton:J,position:n},e.id)}));return Object(a.useEffect)((function(){var e={data:b,index:c};localStorage.setItem("BattlePassTracker",JSON.stringify(e))}),[b,c,F]),Object(h.jsxs)("div",{className:"container",children:[Object(h.jsx)("h1",{children:"Timed Progress tracker"}),Object(h.jsx)(o.b,{flipKey:F,spring:"stiff",children:L}),Object(h.jsx)("div",{className:"add-container",children:Object(h.jsx)("button",{onClick:function(){return w(!0)},children:"Add battlepass"})}),Object(h.jsx)(O,{mode:y,form:p,handleChange:function(e){var t=e.target.name,n=e.target.value;N(Object(l.a)(Object(l.a)({},p),{},Object(i.a)({},t,n))),!1===y&&N((function(e){return Object(l.a)(Object(l.a)({},e),{},{id:c})}))},open:B,onClose:function(){w(!1),S(!1),N({name:"",start:"",end:"",time:"",goal:0,level:"0",increment:1})},onSave:function(){if(!1===y){u(b.concat(p)),r(c+1)}else{var e=b,t=p.id,n=e.findIndex((function(e){return e.id===t}));e[n]=p,u(e),S(!1),M([t,"edit"])}N({name:"",start:"",end:"",time:"",goal:0,level:"0",increment:1}),w(!1)}})]})};s.a.render(Object(h.jsx)(c.a.StrictMode,{children:Object(h.jsx)(x,{})}),document.getElementById("root"))}},[[36,1,2]]]);
//# sourceMappingURL=main.bff0bfd1.chunk.js.map